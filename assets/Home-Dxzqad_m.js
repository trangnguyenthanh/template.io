import{d as defineComponent,r as ref,l as onMounted,m as createBlock,w as withCtx,u as unref,n as resolveComponent,o as openBlock,e as createVNode,b as createBaseVNode,t as toDisplayString,q as IonItem,f as createTextVNode,s as IonSelect,c as createElementBlock,v as renderList,F as Fragment,I as IonInput,g as IonButton,x as createCommentVNode,y as checkmarkCircleOutline,z as IonContent,A as IonPage,B as IonSelectOption,p as pushScopeId,a as popScopeId,_ as _export_sfc}from"./index-CY58Qfmk.js";import{_ as _sfc_main$1}from"./headerPage.vue_vue_type_style_index_0_lang-CSb3g1Fd.js";const _withScopeId=o=>(pushScopeId("data-v-e525ea10"),o=o(),popScopeId(),o),_hoisted_1={style:{padding:"10px 10px 10px 10px",background:"linear-gradient(to right, #757f9a, #d7dde8)",height:"100%"}},_hoisted_2=_withScopeId(()=>createBaseVNode("div",{style:{"text-align":"center"}},[createBaseVNode("h4",null,"Nhập khoản chi")],-1)),_hoisted_3={style:{position:"relative",display:"flex",height:"50px","background-color":"#f68989",width:"100%","border-radius":"5px","text-align":"center","align-items":"center"}},_hoisted_4={style:{"margin-left":"20px",color:"white","font-weight":"600"}},_hoisted_5=_withScopeId(()=>createBaseVNode("br",null,null,-1)),_hoisted_6=_withScopeId(()=>createBaseVNode("br",null,null,-1)),_hoisted_7={slot:"label"},_hoisted_8=_withScopeId(()=>createBaseVNode("br",null,null,-1)),_hoisted_9={slot:"label"},_hoisted_10={key:0,id:"calculator",style:{display:"flex","justify-content":"center",height:"40%",padding:"10px",border:"1px solid gray","border-radius":"10px"}},_hoisted_11=_withScopeId(()=>createBaseVNode("hr",null,null,-1)),_hoisted_12={style:{display:"grid","grid-template-columns":"repeat(4, 1fr)",gap:"2px",width:"80%",height:"100%"}},_hoisted_13={key:0,class:"overlay"},_hoisted_14={key:1,class:"overlay"},_hoisted_15={key:2,class:"overlay"},_hoisted_16={key:3,class:"overlay"},_hoisted_17={key:4,class:"overlay"},_hoisted_18={key:5,class:"ShowModal"},_hoisted_19={class:"wrapper",style:{width:"200px"}},_hoisted_20=_withScopeId(()=>createBaseVNode("h5",{style:{"margin-bottom":"20px"}}," Số tiền trong ví không đủ để thực hiện giao dịch. ",-1)),_hoisted_21={key:6,class:"ShowModal"},_hoisted_22={class:"wrapper",style:{width:"200px"}},_hoisted_23=_withScopeId(()=>createBaseVNode("h5",{style:{"margin-bottom":"20px"}}," Xin vui lòng chọn danh mục để lưu. ",-1)),_hoisted_24={key:7,class:"ShowModal"},_hoisted_25={class:"wrapper",style:{width:"200px"}},_hoisted_26=_withScopeId(()=>createBaseVNode("h5",{style:{"margin-bottom":"20px"}}," Số tiền ko được để trống. ",-1)),_hoisted_27={key:0,class:"ShowModal"},_hoisted_28={class:"wrapper",style:{width:"200px"}},_hoisted_29=_withScopeId(()=>createBaseVNode("h5",{style:{"margin-bottom":"20px"}}," Xin vui lòng nhập ghi chú. ",-1)),_hoisted_30={key:1,class:"ShowModal"},_hoisted_31={class:"wrapper",style:{width:"200px"}},_hoisted_32=_withScopeId(()=>createBaseVNode("h5",{style:{"margin-bottom":"20px"}}," Đã nhập dữ liệu ",-1)),_sfc_main=defineComponent({__name:"Home",setup(__props){const showModalNotMoney=ref(!1),showModalCategory=ref(!1),showModalMoney0=ref(!1),showDontNote=ref(!1),money=ref(""),note=ref(""),showSuccessModal=ref(!1),userName=ref(""),walletMomo=ref(""),selectedCategory=ref(),categories=ref([{id:1,name:"Mua sắm"},{id:2,name:"Ăn uống"},{id:3,name:"Di chuyển"},{id:4,name:"Giải trí"},{id:5,name:"Hóa đơn"},{id:6,name:"Sức khỏe"},{id:7,name:"Gia đình"},{id:8,name:"Quà tặng"},{id:9,name:"Khác"},{id:10,name:"Trả nợ"}]);onMounted(()=>{userName.value=localStorage.getItem("userName")||"",walletMomo.value=localStorage.getItem("walletMoney")||""});const formatWalletMoney=o=>o?o.replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0",showCalculator=ref(!1),appendNumber=o=>{money.value+=o},add=()=>{money.value+="+"},subtract=()=>{money.value+="-"},multiply=()=>{money.value+="*"},divide=()=>{money.value+="/"},clear=()=>{money.value=""};let result="";const calculate=()=>{try{result=eval(money.value),money.value=result}catch(o){money.value="Error"}},handleInput=()=>{money.value=money.value.replace(/[^0-9+\-*/.]/g,"")},saveData=()=>{var d;if(selectedCategory.value===null){console.error("Vui lòng chọn danh mục trước khi lưu."),showModalCategory.value=!0,setTimeout(()=>{showModalCategory.value=!1},3e3);return}if(note.value===""){showDontNote.value=!0,setTimeout(()=>{showDontNote.value=!1},3e3);return}const o=(d=categories.value.find(s=>s.id.toString()===selectedCategory.value))==null?void 0:d.name,e=Number(money.value);if(isNaN(e)||e<=0){console.error("Vui lòng nhập số tiền hợp lệ."),showModalMoney0.value=!0,setTimeout(()=>{showModalMoney0.value=!1},3e3);return}const a=Number(walletMomo.value.replace(/\D/g,""));if(e>a){console.error("Số tiền trong ví không đủ."),showModalNotMoney.value=!0,setTimeout(()=>{showModalNotMoney.value=!1},3e3);return}const l=new Date().toISOString(),t=a-e;walletMomo.value=formatWalletMoney(String(t)),localStorage.setItem("walletMoney",String(t));const r=JSON.parse(localStorage.getItem(o)||"[]");r.push({note:note.value,amount:e,date:l}),showSuccessModal.value=!0,setTimeout(()=>{showSuccessModal.value=!1},1e3),note.value="",money.value="",localStorage.setItem(String(o),JSON.stringify(r)),setTimeout(()=>{window.location.reload()},800)};return(o,e)=>{const a=resolveComponent("ion-label"),n=resolveComponent("ion-text"),l=resolveComponent("ion-icon");return openBlock(),createBlock(unref(IonPage),null,{default:withCtx(()=>[createVNode(_sfc_main$1),createVNode(unref(IonContent),{"scroll-y":!0,style:{"font-size":"12px"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[_hoisted_2,createBaseVNode("div",_hoisted_3,[createBaseVNode("p",_hoisted_4," Tiền trong ví: "+toDisplayString(formatWalletMoney(walletMomo.value))+" VND ",1)]),_hoisted_5,createVNode(unref(IonItem),{style:{"border-radius":"5px","font-size":"12px"}},{default:withCtx(()=>[createVNode(a,{style:{"font-weight":"600"}},{default:withCtx(()=>[createTextVNode("Danh mục : ")]),_:1}),createVNode(unref(IonSelect),{modelValue:selectedCategory.value,"onUpdate:modelValue":e[0]||(e[0]=t=>selectedCategory.value=t)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(categories.value,t=>(openBlock(),createBlock(unref(IonSelectOption),{key:t.id,value:t.id},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),_hoisted_6,createVNode(unref(IonInput),{style:{"background-color":"white","border-radius":"5px"},fill:"outline",modelValue:note.value,"onUpdate:modelValue":e[1]||(e[1]=t=>note.value=t),onClick:e[2]||(e[2]=t=>showCalculator.value=!1)},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7,[createVNode(n,{style:{"font-weight":"600"},color:"primary"},{default:withCtx(()=>[createTextVNode("ghi chú : ")]),_:1})])]),_:1},8,["modelValue"]),_hoisted_8,createVNode(unref(IonInput),{onClick:e[3]||(e[3]=t=>showCalculator.value=!0),style:{"background-color":"white","border-radius":"5px"},fill:"outline",modelValue:money.value,"onUpdate:modelValue":e[4]||(e[4]=t=>money.value=t),type:"number",onInput:handleInput,readonly:""},{default:withCtx(()=>[createBaseVNode("div",_hoisted_9,[createVNode(n,{style:{"font-weight":"600"},color:"danger"},{default:withCtx(()=>[createTextVNode("( VND ) : ")]),_:1})])]),_:1},8,["modelValue"]),createVNode(unref(IonButton),{color:"tertiary",style:{"margin-top":"10px"},expand:"block",onClick:saveData},{default:withCtx(()=>[createTextVNode(" Lưu ")]),_:1}),showCalculator.value?(openBlock(),createElementBlock("div",_hoisted_10,[_hoisted_11,createBaseVNode("div",_hoisted_12,[createVNode(unref(IonButton),{color:"dark",onClick:e[5]||(e[5]=t=>clear())},{default:withCtx(()=>[createTextVNode("C")]),_:1}),createVNode(unref(IonButton),{onClick:e[6]||(e[6]=t=>divide())},{default:withCtx(()=>[createTextVNode(" ÷ ")]),_:1}),createVNode(unref(IonButton),{onClick:e[7]||(e[7]=t=>multiply())},{default:withCtx(()=>[createTextVNode("x")]),_:1}),createVNode(unref(IonButton),{color:"danger",onClick:e[8]||(e[8]=t=>calculate())},{default:withCtx(()=>[createTextVNode(" =")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[9]||(e[9]=t=>appendNumber(1))},{default:withCtx(()=>[createTextVNode("1")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[10]||(e[10]=t=>appendNumber(2))},{default:withCtx(()=>[createTextVNode("2")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[11]||(e[11]=t=>appendNumber(3))},{default:withCtx(()=>[createTextVNode("3")]),_:1}),createVNode(unref(IonButton),{onClick:e[12]||(e[12]=t=>add())},{default:withCtx(()=>[createTextVNode("+")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[13]||(e[13]=t=>appendNumber(4))},{default:withCtx(()=>[createTextVNode("4")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[14]||(e[14]=t=>appendNumber(5))},{default:withCtx(()=>[createTextVNode("5")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[15]||(e[15]=t=>appendNumber(6))},{default:withCtx(()=>[createTextVNode("6")]),_:1}),createVNode(unref(IonButton),{onClick:e[16]||(e[16]=t=>subtract())},{default:withCtx(()=>[createTextVNode("-")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[17]||(e[17]=t=>appendNumber(7))},{default:withCtx(()=>[createTextVNode("7")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[18]||(e[18]=t=>appendNumber(8))},{default:withCtx(()=>[createTextVNode("8")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[19]||(e[19]=t=>appendNumber(9))},{default:withCtx(()=>[createTextVNode("9")]),_:1}),createVNode(unref(IonButton),{color:"medium",onClick:e[20]||(e[20]=t=>appendNumber(0))},{default:withCtx(()=>[createTextVNode("0")]),_:1})]),createVNode(unref(IonButton),{color:"success",style:{width:"100px"},onClick:e[21]||(e[21]=t=>showCalculator.value=!1)},{default:withCtx(()=>[createVNode(n,{style:{"font-size":"25px"}},{default:withCtx(()=>[createTextVNode("Ok")]),_:1})]),_:1})])):createCommentVNode("",!0)]),createBaseVNode("div",null,[showModalNotMoney.value?(openBlock(),createElementBlock("div",_hoisted_13)):createCommentVNode("",!0),showModalCategory.value?(openBlock(),createElementBlock("div",_hoisted_14)):createCommentVNode("",!0),showModalMoney0.value?(openBlock(),createElementBlock("div",_hoisted_15)):createCommentVNode("",!0),showDontNote.value?(openBlock(),createElementBlock("div",_hoisted_16)):createCommentVNode("",!0),showSuccessModal.value?(openBlock(),createElementBlock("div",_hoisted_17)):createCommentVNode("",!0),showModalNotMoney.value?(openBlock(),createElementBlock("div",_hoisted_18,[createBaseVNode("div",_hoisted_19,[_hoisted_20,createVNode(unref(IonButton),{color:"medium",style:{width:"100px"},onClick:e[22]||(e[22]=t=>showModalNotMoney.value=!1)},{default:withCtx(()=>[createVNode(n,{style:{"font-size":"13px"}},{default:withCtx(()=>[createTextVNode("Đóng")]),_:1})]),_:1})])])):createCommentVNode("",!0),showModalCategory.value?(openBlock(),createElementBlock("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[_hoisted_23,createVNode(unref(IonButton),{color:"medium",style:{width:"100px"},onClick:e[23]||(e[23]=t=>showModalCategory.value=!1)},{default:withCtx(()=>[createVNode(n,{style:{"font-size":"13px"}},{default:withCtx(()=>[createTextVNode("Đóng")]),_:1})]),_:1})])])):createCommentVNode("",!0),showModalMoney0.value?(openBlock(),createElementBlock("div",_hoisted_24,[createBaseVNode("div",_hoisted_25,[_hoisted_26,createVNode(unref(IonButton),{color:"medium",style:{width:"100px"},onClick:e[24]||(e[24]=t=>showModalMoney0.value=!1)},{default:withCtx(()=>[createVNode(n,{style:{"font-size":"13px"}},{default:withCtx(()=>[createTextVNode("Đóng")]),_:1})]),_:1})])])):createCommentVNode("",!0)]),showDontNote.value?(openBlock(),createElementBlock("div",_hoisted_27,[createBaseVNode("div",_hoisted_28,[_hoisted_29,createVNode(unref(IonButton),{color:"medium",style:{width:"100px"},onClick:e[25]||(e[25]=t=>showDontNote.value=!1)},{default:withCtx(()=>[createVNode(n,{style:{"font-size":"13px"}},{default:withCtx(()=>[createTextVNode("Đóng")]),_:1})]),_:1})])])):createCommentVNode("",!0),showSuccessModal.value?(openBlock(),createElementBlock("div",_hoisted_30,[createBaseVNode("div",_hoisted_31,[_hoisted_32,createVNode(l,{color:"success",style:{"font-size":"40px"},icon:unref(checkmarkCircleOutline)},null,8,["icon"])])])):createCommentVNode("",!0)]),_:1})]),_:1})}}}),Home=_export_sfc(_sfc_main,[["__scopeId","data-v-e525ea10"]]);export{Home as default};
